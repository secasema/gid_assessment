{"version":3,"sources":["Opportunity.jsx","ExpaEndpoint.js","App.jsx","index.js","config.js"],"names":["Opportunity","_ref","title","location","duration","programmes","coverPhotoUrl","onClick","react_default","a","createElement","className","short_name","src","alt","getPagedFromExpa","object","options","url","concat","access_token","page","fetch","then","response","json","obj","paging","data","Error","JSON","stringify","App","_React$Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isLoaded","hasMoreItems","opps","inherits","createClass","key","value","_this2","ACCESS_TOKEN","alert","newOpps","map","opp","id","organisation","cover_photo_urls","src_Opportunity","setState","prevState","currentPage","current_page","total_pages","error","_this3","loader","_this$state","react_infinite_scroller_default","pageStart","loadMore","loadItems","hasMore","React","Component","displayName","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.636f82ef.chunk.js","sourcesContent":["import React from 'react';\nimport { PropTypes } from 'prop-types';\n\nconst Opportunity = ({\n  title, location, duration, programmes, coverPhotoUrl, onClick,\n}) => (\n  <li className=\"Opportunity\" onClick={() => onClick()}>\n    <div className=\"Opp-header\">\n      <h2>{title}</h2>\n    </div>\n    <div className=\"App-intro\">\n      <p>{location}</p>\n      <p>\n        {duration}\n        {' weeks'}\n      </p>\n      <p>{programmes.short_name}</p>\n      <p>\n        <img src={coverPhotoUrl} alt=\"\" />\n      </p>\n    </div>\n  </li>\n);\n\nOpportunity.propTypes = {\n  title: PropTypes.string.isRequired,\n  location: PropTypes.string.isRequired,\n  duration: PropTypes.number.isRequired,\n  branch: PropTypes.shape({\n    organisation: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  programmes: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    short_name: PropTypes.string.isRequired,\n  }).isRequired,\n  coverPhotoUrl: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Opportunity;\n","\nconst API_BASE = 'http://gisapi-web-staging-1636833739.eu-west-1.elb.amazonaws.com/v2/';\n\nconst getPagedFromExpa = (object, options) => {\n  const url = `${API_BASE + object}/?access_token=${options.access_token}&page=${options.page}`;\n  return fetch(url, options).then(response => response.json()).then((obj) => {\n    if (!obj.paging || !obj.data) {\n      throw new Error(\n        `EXPA did not return paged object: ${JSON.stringify(obj)}`,\n      );\n    }\n    return obj;\n  });\n};\n\nexport default getPagedFromExpa;\n","import React from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport Opportunity from './Opportunity';\nimport getPagedFromExpa from './ExpaEndpoint';\n\nimport { ACCESS_TOKEN } from './config';\n\nconst App = class extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      hasMoreItems: true,\n      opps: [],\n    };\n  }\n\n  loadItems(page) {\n    return getPagedFromExpa('opportunities', {\n      access_token: ACCESS_TOKEN,\n      page,\n    }).then(\n      ({ paging, data }) => {\n        const onClick = () => {\n          alert('TO-DO: Modal for editing opps');\n        };\n        const newOpps = data.map((opp) => {\n          const {\n            id, title, location, duration, organisation, programmes,\n          } = opp;\n          const coverPhotoUrl = opp.cover_photo_urls;\n          return (\n            <Opportunity\n              key={id}\n              title={title}\n              location={location}\n              duration={duration}\n              organisation={organisation}\n              programmes={programmes}\n              coverPhotoUrl={coverPhotoUrl}\n              onClick={onClick}\n            />\n          );\n        });\n\n        this.setState(prevState => ({\n          currentPage: page + 1,\n          isLoaded: true,\n          hasMoreItems: paging.current_page !== paging.total_pages,\n          opps: prevState.opps.concat(newOpps),\n        }));\n      },\n      (error) => {\n        this.setState({\n          isLoaded: true,\n          error,\n        });\n      },\n    );\n  }\n\n  render() {\n    const loader = <div className=\"loader\">Loading ...</div>;\n    const { hasMoreItems, opps } = this.state;\n\n    return (\n      <InfiniteScroll\n        pageStart={1}\n        loadMore={page => this.loadItems(page)}\n        hasMore={hasMoreItems}\n        loader={loader}\n      >\n        <div className=\"Opps-wrapper\">\n          { opps }\n        </div>\n      </InfiniteScroll>\n    );\n  }\n};\n\nApp.displayName = 'App';\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(React.createElement(App), document.getElementById('root'));","module.exports = {\n  ACCESS_TOKEN: 'dd0df21c8af5d929dff19f74506c4a8153d7acd34306b9761fd4a57cfa1d483c',\n};\n"],"sourceRoot":""}